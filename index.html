<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>BlueStream – Watch Movies & Series</title>

<!-- SEO -->
<meta name="description" content="Streaming film dan series terbaru, anime, drama, dan K-Drama gratis.">
<meta name="keywords" content="streaming film, nonton film, series, anime, drama korea">
<meta name="author" content="BlueStream">

<style>
:root {
  --bg: #0b1220;
  --card: #111a2e;
  --primary: #1e90ff;
  --text: #e5e7eb;
  --muted: #94a3b8;
}
* { box-sizing: border-box; margin:0; padding:0 }
body {
  background: var(--bg);
  color: var(--text);
  font-family: system-ui, sans-serif;
}
a { color: inherit; text-decoration: none }

/* NAVBAR */
nav {
  position: sticky;
  top: 0;
  z-index: 99;
  background: rgba(11,18,32,.9);
  backdrop-filter: blur(10px);
  padding: 12px 16px;
  display: flex;
  gap: 12px;
  align-items: center;
}
nav h1 { color: var(--primary); font-size: 20px }
nav input {
  flex: 1;
  padding: 10px;
  border-radius: 8px;
  border: none;
  outline: none;
}

/* HERO */
.hero {
  height: 50vh;
  position: relative;
  overflow: hidden;
}
.hero img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  filter: brightness(.6);
}
.hero-content {
  position: absolute;
  bottom: 20px;
  left: 20px;
}

/* CATEGORY */
.tabs {
  display: flex;
  gap: 10px;
  overflow-x: auto;
  padding: 16px;
}
.tabs button {
  background: var(--card);
  border: none;
  color: var(--text);
  padding: 8px 14px;
  border-radius: 999px;
  cursor: pointer;
}
.tabs button.active { background: var(--primary) }

/* GRID */
.grid {
  display: grid;
  gap: 16px;
  padding: 16px;
  grid-template-columns: repeat(auto-fill, minmax(150px,1fr));
}
.card {
  background: var(--card);
  border-radius: 12px;
  overflow: hidden;
  cursor: pointer;
  transition: transform .3s;
}
.card:hover { transform: scale(1.05) }
.card img {
  width: 100%;
  height: 220px;
  object-fit: cover;
}
.card .info {
  padding: 10px;
  font-size: 14px;
}

/* LOADING */
.skeleton {
  background: linear-gradient(90deg,#111,#222,#111);
  animation: pulse 1.5s infinite;
}
@keyframes pulse {
  0%{background-position:0}
  100%{background-position:200%}
}

/* MODAL */
.modal {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,.8);
  display: none;
  justify-content: center;
  align-items: center;
}
.modal-content {
  background: var(--card);
  max-width: 800px;
  width: 90%;
  border-radius: 12px;
  overflow: auto;
  max-height: 90vh;
}
.modal iframe {
  width: 100%;
  height: 400px;
  border: none;
}
.close {
  padding: 10px;
  text-align: right;
  cursor: pointer;
  color: var(--muted);
}
</style>
</head>

<body>

<nav>
  <h1>BlueStream</h1>
  <input id="search" placeholder="Search movies & series...">
</nav>

<section class="hero" id="hero"></section>

<div class="tabs">
  <button class="active" data-action="trending">Trending</button>
  <button data-action="indonesian-movies">Film Indo</button>
  <button data-action="indonesian-drama">Drama Indo</button>
  <button data-action="kdrama">K-Drama</button>
  <button data-action="anime">Anime</button>
</div>

<div class="grid" id="grid"></div>

<div class="modal" id="modal">
  <div class="modal-content">
    <div class="close" onclick="closeModal()">✖ Close</div>
    <div id="detail"></div>
  </div>
</div>

<script>
const API = "https://zeldvorik.ru/apiv3/api.php";
let page = 1;
let action = "trending";
let loading = false;
let keyword = "";

const grid = document.getElementById("grid");
const hero = document.getElementById("hero");

async function fetchData(reset=false) {
  if (loading) return;
  loading = true;

  if (reset) {
    grid.innerHTML = "";
    page = 1;
  }

  let url = `${API}?action=${action}&page=${page}`;
  if (keyword) url = `${API}?action=search&q=${keyword}`;

  const res = await fetch(url);
  const data = await res.json();

  if (page === 1 && data.items?.length) renderHero(data.items[0]);
  data.items.forEach(renderCard);

  page++;
  loading = false;
}

function renderHero(item) {
  hero.innerHTML = `
    <img src="${item.poster}">
    <div class="hero-content">
      <h2>${item.title}</h2>
      <p>${item.year} • ⭐ ${item.rating}</p>
    </div>
  `;
}

function renderCard(item) {
  const el = document.createElement("div");
  el.className = "card";
  el.innerHTML = `
    <img src="${item.poster}">
    <div class="info">
      <strong>${item.title}</strong><br>
      ⭐ ${item.rating}
    </div>
  `;
  el.onclick = () => openDetail(item.detailPath);
  grid.appendChild(el);
}

async function openDetail(path) {
  const res = await fetch(`${API}?action=detail&detailPath=${path}`);
  const d = await res.json();

  document.getElementById("detail").innerHTML = `
    <iframe src="${d.playerUrl}" allowfullscreen></iframe>
    <div style="padding:16px">
      <h2>${d.title}</h2>
      <p>${d.description || ""}</p>
    </div>
  `;
  document.getElementById("modal").style.display = "flex";
}

function closeModal() {
  document.getElementById("modal").style.display = "none";
}

/* CATEGORY */
document.querySelectorAll(".tabs button").forEach(btn=>{
  btn.onclick = ()=>{
    document.querySelector(".active")?.classList.remove("active");
    btn.classList.add("active");
    action = btn.dataset.action;
    keyword = "";
    fetchData(true);
  }
});

/* SEARCH (debounce) */
let timer;
document.getElementById("search").oninput = e=>{
  clearTimeout(timer);
  timer = setTimeout(()=>{
    keyword = e.target.value;
    fetchData(true);
  },500);
};

/* INFINITE SCROLL */
window.onscroll = ()=>{
  if (window.innerHeight + window.scrollY >= document.body.offsetHeight - 500) {
    fetchData();
  }
};

fetchData();
</script>
</body>
</html>
